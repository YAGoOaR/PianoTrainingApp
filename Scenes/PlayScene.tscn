[gd_scene load_steps=17 format=3 uid="uid://b8h3lrgadghix"]

[ext_resource type="Script" path="res://Scripts/GameManager.cs" id="1_u53or"]
[ext_resource type="Script" path="res://Scripts/GameElements/Alerts.cs" id="2_4jih0"]
[ext_resource type="Script" path="res://Scripts/GameElements/PianoKeyboard.cs" id="4_4ebec"]
[ext_resource type="Script" path="res://Scripts/GameElements/FallingNotes.cs" id="5_ga1et"]
[ext_resource type="Script" path="res://Scripts/GameElements/ProgressBar.cs" id="6_t5trx"]
[ext_resource type="Script" path="res://Scripts/GameElements/BeatDrawer.cs" id="7_2snt0"]
[ext_resource type="Theme" uid="uid://by2aa8qlbtfpg" path="res://Themes/font_theme.tres" id="7_gxgea"]
[ext_resource type="Theme" uid="uid://cliu30v8gh5n1" path="res://Themes/themeBlackKey.tres" id="8_k24y3"]
[ext_resource type="Theme" uid="uid://dtjmaoh4kf33q" path="res://Themes/themeWhiteKey.tres" id="10_dk06m"]
[ext_resource type="StyleBox" uid="uid://dpoerorof6ufy" path="res://Themes/alert_style_box_flat.tres" id="10_tvxw8"]
[ext_resource type="Theme" uid="uid://g5idrlertwwb" path="res://Themes/white_key.tres" id="11_evqa8"]
[ext_resource type="Theme" uid="uid://crnyqkpjibv2t" path="res://Themes/black_key.tres" id="12_idt47"]
[ext_resource type="Theme" uid="uid://dagitmua1vpuv" path="res://Themes/active_key.tres" id="12_m70jk"]
[ext_resource type="Theme" uid="uid://cl5sn51ecfkxm" path="res://Themes/black_active_key.tres" id="13_d22rl"]
[ext_resource type="Theme" uid="uid://bmd3anhug6lmh" path="res://Themes/ui_theme.tres" id="14_oh4w4"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_h1xpk"]
bg_color = Color(0.137546, 0.665053, 0.790437, 1)
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
border_color = Color(0.18359, 0.18359, 0.18359, 1)
corner_radius_top_left = 10
corner_radius_top_right = 10
corner_radius_bottom_right = 10
corner_radius_bottom_left = 10

[node name="PlayScene" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="GameManager" type="Node2D" parent="."]
script = ExtResource("1_u53or")

[node name="Alerts" type="Control" parent="." node_paths=PackedStringArray("deviceDisconnectedPanel", "waitingForDevicePanel")]
anchors_preset = 0
script = ExtResource("2_4jih0")
deviceDisconnectedPanel = NodePath("../DeviceDisconnected")
waitingForDevicePanel = NodePath("../WaitingForDevice")

[node name="Control" type="Control" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="FallingNotes" type="Control" parent="Control" node_paths=PackedStringArray("piano", "progressBar")]
layout_mode = 1
anchor_top = 0.048
anchor_right = 1.0
anchor_bottom = 0.756
offset_top = -0.120003
offset_bottom = -0.640015
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("5_ga1et")
piano = NodePath("../Piano")
progressBar = NodePath("../HBoxContainer/ProgressBar")
fontTheme = ExtResource("7_gxgea")
themeWhiteKey = ExtResource("10_dk06m")
themeBlackKey = ExtResource("8_k24y3")

[node name="TempoDrawer" type="Control" parent="Control/FallingNotes"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("7_2snt0")
lineColor = Color(0.360784, 0.360784, 0.360784, 1)

[node name="Piano" type="ReferenceRect" parent="Control"]
layout_mode = 1
anchors_preset = -1
anchor_top = 0.756
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = -0.640015
grow_horizontal = 2
grow_vertical = 0
border_width = 3.0
script = ExtResource("4_4ebec")
whiteTheme = ExtResource("11_evqa8")
blackTheme = ExtResource("12_idt47")
whiteActiveTheme = ExtResource("12_m70jk")
blackActiveTheme = ExtResource("13_d22rl")

[node name="HBoxContainer" type="HBoxContainer" parent="Control"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_bottom = -1371.0
grow_horizontal = 2
grow_vertical = 2

[node name="ProgressBar" type="Control" parent="Control/HBoxContainer" node_paths=PackedStringArray("progressLabel", "progressRect")]
layout_mode = 2
size_flags_horizontal = 3
size_flags_stretch_ratio = 11.23
script = ExtResource("6_t5trx")
progressLabel = NodePath("Panel/Label")
progressRect = NodePath("Panel/Progress")

[node name="Panel" type="Panel" parent="Control/HBoxContainer/ProgressBar"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("14_oh4w4")

[node name="Progress" type="ColorRect" parent="Control/HBoxContainer/ProgressBar/Panel"]
layout_mode = 1
anchors_preset = 9
anchor_bottom = 1.0
offset_right = 1468.0
grow_vertical = 2
mouse_filter = 2
color = Color(0.0496095, 0.608785, 0.0546306, 1)

[node name="Label" type="Label" parent="Control/HBoxContainer/ProgressBar/Panel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/font_size = 38
text = "0%"
horizontal_alignment = 1
vertical_alignment = 1

[node name="Button" type="Button" parent="Control/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
theme = ExtResource("14_oh4w4")
text = "Menu"

[node name="DeviceDisconnected" type="PopupPanel" parent="."]
title = "DEVICE DISCONNECTED"
position = Vector2i(976, 561)
size = Vector2i(590, 125)
always_on_top = true
transparent = true
extend_to_title = true
mouse_passthrough = true
keep_title_visible = true
theme_override_styles/panel = ExtResource("10_tvxw8")

[node name="Label" type="Label" parent="DeviceDisconnected"]
offset_right = 590.0
offset_bottom = 125.0
text = "Device disconnected!"
horizontal_alignment = 1
vertical_alignment = 1

[node name="WaitingForDevice" type="PopupPanel" parent="."]
title = "DEVICE NOT CONNECTED"
position = Vector2i(975, 613)
size = Vector2i(600, 125)
visible = true
always_on_top = true
keep_title_visible = true
theme_override_styles/panel = ExtResource("10_tvxw8")

[node name="Label" type="Label" parent="WaitingForDevice"]
offset_right = 600.0
offset_bottom = 125.0
text = "Waiting for device to be connected..."
horizontal_alignment = 1
vertical_alignment = 1

[node name="References" type="Control" parent="."]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="NoteReference" type="Panel" parent="References"]
layout_mode = 0
offset_left = 825.0
offset_top = 410.0
offset_right = 909.0
offset_bottom = 522.0
theme = ExtResource("10_dk06m")
theme_override_styles/panel = SubResource("StyleBoxFlat_h1xpk")

[node name="Label" type="Label" parent="References/NoteReference"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = -14.0
offset_right = -37.0
offset_bottom = 15.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("7_gxgea")
text = "A b"
horizontal_alignment = 1
autowrap_mode = 1

[node name="White" type="Panel" parent="References"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.0753906
anchor_top = 0.640278
anchor_right = 0.0753906
anchor_bottom = 0.640278
offset_top = -350.0
offset_right = 60.0
grow_vertical = 0
theme = ExtResource("11_evqa8")
metadata/_edit_use_anchors_ = true

[node name="Black" type="Panel" parent="References/White"]
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 35.0
offset_top = -351.0
offset_right = 74.0
offset_bottom = -136.0
grow_vertical = 0
theme = ExtResource("12_idt47")

[connection signal="pressed" from="Control/HBoxContainer/Button" to="GameManager" method="Exit"]
